<html>
    <head>
        <title>text2speech server</title>
    </head>
    <body>
        <div id="result">null</div>
        <script>
            try {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                recognition.continuous = true;
                recognition.lang = 'en-US';
                recognition.interimResults = false;
                recognition.maxAlternatives = 1;
                recognition.start();
                console.log('Speech recognition initialized.');

                recognition.onresult = (event) => {
                    let utteranceList = event.results;
                    let latestUtterance = utteranceList[utteranceList.length-1];
                    let speechRecognition = latestUtterance[latestUtterance.length-1];
                    let transcript = speechRecognition.transcript.toLowerCase();
                    const elem = document.getElementById('result');
                    if (latestUtterance.isFinal) {
                        elem.innerHTML = transcript;
                    }
                }
            } catch (err) {
                console.log(err);
            }
        </script>
    </body>
</html>

